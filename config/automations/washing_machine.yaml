- alias: when_washing_machine_run
  trigger:
    - platform: state
      entity_id: binary_sensor.washing_machine_run
      to: 'on'
  action:
    - service: script.speech_engine
      data_template:
        media_player:
          - media_player.echo_dot_cozinha
        custom_message: >
          {{random_speech('washing_machine_run')}}
        call_no_announcement: 1
        call_no_random: 1

# - alias: when_washing_machine_washing
#   initial_state: 'off'
#   trigger:
#     - platform: state
#       entity_id: binary_sensor.washing_machine_washing
#       from: 'off'
#       to: 'on'
#   action:
#     - service: script.speech_engine
#       data_template:
#         media_player:
#           - media_player.alexa_laboratory
#- media_player.alexa_kitchen
#         custom_message: >
#           {{ [
#            "A máquina de lavar roupas iniciou a lavagem."
#            ] | random }}
#         call_no_announcement: 1
#
# - alias: when_washing_machine_drain
#   initial_state: 'off'
#   trigger:
#     - platform: state
#       entity_id: binary_sensor.washing_machine_drain
#       from: 'off'
#       to: 'on'
#   action:
#     - service: script.speech_engine
#       data_template:
#         media_player:
#           - media_player.alexa_laboratory
#         custom_message: >
#           {{ [
#            "A máquina de lavar roupas está drenando a água."
#            ] | random }}
#         call_no_announcement: 1
#
- alias: when_washing_machine_rinse
  trigger:
    - platform: state
      entity_id: binary_sensor.washing_machine_rinse
      to: 'on'
      for: '00:02:00'
  action:
    - service: script.speech_engine
      data_template:
        media_player:
          - media_player.echo_dot_cozinha
        custom_message: >
          {{random_speech('washing_machine_rinse')}}
        call_no_announcement: 1
        call_no_random: 1
    # - wait_template: "{{ is_state('binary_sensor.motion_laundry_occupancy', 'off') }}"
    #   timeout: '00:01:00'
    #   continue_on_timeout: 'false'


#
# - alias: when_washing_machine_centrifughe
#   initial_state: 'off'
#   trigger:
#     - platform: state
#       entity_id: binary_sensor.washing_machine_centrifughe
#       from: 'off'
#       to: 'on'
#   action:
#     - service: script.speech_engine
#       data_template:
#         media_player:
#           - media_player.alexa_laboratory
#         custom_message: >
#           {{ [
#            "A máquina de lavar roupas vai começou a centrifugar."
#            ] | random }}
#         call_no_announcement: 1

- alias: when_washing_machine_end
  trigger:
    - platform: state
      entity_id: binary_sensor.washing_machine_end
      to: 'on'
  action:
    - service: script.speech_engine
      data_template:
        media_player:
          - media_player.echo_dot_cozinha
        custom_message: >
          {{random_speech('washing_machine_end')}}
        call_no_announcement: 1
        call_no_random: 1
